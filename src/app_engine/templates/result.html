{% extends "base_template.html" %}

{% block content %}
<div class="result-container">
  <h2>Song Match Result</h2>
  
  {% if match %}
    {% set match_data = match|replace("'", '"')|from_json %}
    
    <div class="song-card">
      {% if match_data.album_image_url %}
        <img src="{{ match_data.album_image_url }}" alt="{{ match_data.album_name }}" class="album-cover">
      {% endif %}
      
      <div class="song-info">
        <h3>{{ match_data.track_name }}</h3>
        <p class="artist">{{ match_data.artist_names }}</p>
        <p class="album">Album: {{ match_data.album_name }}</p>
        <p class="release-date">Released: {{ match_data.album_release_date }}</p>
        
        {% if match_data.track_duration_ms %}
          <p class="duration">Duration: {{ format_duration_ms(match_data.track_duration_ms) }}</p>
        {% endif %}
        
        {% if match_data.explicit %}
          <span class="explicit-tag">Explicit</span>
        {% endif %}
        
        {% if match_data.youtube_url %}
          <a href="{{ match_data.youtube_url }}" class="youtube-link" target="_blank">
            Watch on YouTube
          </a>
        {% endif %}
      </div>
    </div>
    
  {% else %}
    <p>No match information available.</p>
  {% endif %}
  
  <!-- Debug raw data -->
  <details>
    <summary>Raw match data</summary>
    <pre>{{ match }}</pre>
  </details>
</div>

<style>
  .result-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .song-card {
    display: flex;
    background: #f9f9f9;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin: 20px 0;
  }
  
  .album-cover {
    width: 200px;
    height: 200px;
    object-fit: cover;
  }
  
  .song-info {
    padding: 20px;
    flex: 1;
  }
  
  .song-info h3 {
    margin-top: 0;
    font-size: 24px;
  }
  
  .artist {
    font-size: 18px;
    color: #555;
  }
  
  .explicit-tag {
    background: #555;
    color: white;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-right: 10px;
  }
  
  .youtube-link {
    display: inline-block;
    margin-top: 15px;
    background: #ff0000;
    color: white;
    padding: 8px 15px;
    border-radius: 4px;
    text-decoration: none;
  }
  
  details {
    margin-top: 30px;
    color: #777;
  }
</style>
{% endblock %}
